<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Documentation: DNS and Postal Installation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>Workflow Documentation</h1>
                <p>Complete guide for Cloudflare DNS and Postal Mail Server installation</p>
            </div>

            <div class="nav-section">
                <h3>Main Sections</h3>
                <ul class="nav-links">
                    <li><a href="#cloudflare-dns" class="active" data-tab="cloudflare-dns"><i class="fas fa-cloud"></i>
                            Cloudflare DNS</a></li>
                    <li><a href="#postal-installation" data-tab="postal-installation"><i class="fas fa-server"></i>
                            Postal Installation</a></li>
                    <li><a href="#aapanel-automation" data-tab="aapanel-automation"><i class="fas fa-cogs"></i> aaPanel
                            Automation</a></li>
                    <li><a href="#instantly-integration" data-tab="instantly-integration"><i class="fas fa-bolt"></i>
                            Add ID Instantly</a></li>
                </ul>
            </div>




        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Content Tabs -->
            <div class="content-tabs">
                <div class="tab active" data-tab="cloudflare-dns"><i class="fas fa-cloud"></i> Cloudflare DNS Setup
                </div>
                <div class="tab" data-tab="postal-installation"><i class="fas fa-server"></i> Postal Installation</div>
                <div class="tab" data-tab="aapanel-automation"><i class="fas fa-cogs"></i> aaPanel Automation</div>
                <div class="tab" data-tab="instantly-integration"><i class="fas fa-bolt"></i> Add ID Instantly</div>
            </div>

            <!-- Tab 1: Cloudflare DNS -->
            <section id="cloudflare-dns" class="tab-content active">
                <div class="section-header">
                    <h2>Cloudflare DNS Setup</h2>
                    <p>Automate DNS record management in Cloudflare using Google Sheets as a data source</p>
                </div>

                <div class="doc-card">
                    <div class="doc-header">
                        <h3><i class="fas fa-list-ol"></i> Add Basic Records in Cloudflare</h3>
                    </div>
                    <div class="doc-body">
                        <!-- Step 1 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">1</span>
                                <span>Preparation of the DNS records in the xlsx sheet</span>
                            </div>
                            <p>Prepare the first row for Cloudflare as:</p>

                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Domain</th>
                                            <th>Type</th>
                                            <th>Name</th>
                                            <th>Content</th>
                                            <th>Priority</th>
                                            <th>zone_id</th>
                                            <th>token</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>example.com</td>
                                            <td>A</td>
                                            <td>@</td>
                                            <td>192.0.2.1</td>
                                            <td>-</td>
                                            <td>abc123...</td>
                                            <td>CF_Token_1</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <p>Fill below rows with the correct information under the respective columns.</p>
                            <p>Go to the Cloudflare dashboard and fetch the zone_id and the access token keys.</p>
                            <p>Click on <strong>File â†’ Share â†’ Share with Others â†’ Grant access to everyone with the
                                    link â†’ copy this link â†’ paste this env.</strong></p>
                        </div>

                        <!-- Step 2 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">2</span>
                                <span>ENV preparation</span>
                            </div>
                            <p>Edit env and add the correct version of the google sheet url that has access to "anyone
                                with the link", and add it to the value DNS_FILE_URL key. Also make sure that the
                                correct sheets link returns the xlsx format not the html.</p>

                            <div class="code-block">
                                <span class="env-variable">DNS_FILE_URL</span>=<span
                                    class="env-value">"your_google_sheet_url_here"</span>
                            </div>

                            <p>Edit env variable Target_Domains and add the list of the domains whose records are to be
                                added into the Cloudflare.</p>

                            <div class="code-block">
                                <span class="env-variable">Target_Domains</span>=<span
                                    class="env-value">"domain1.com,domain2.com,domain3.com"</span>
                            </div>

                            <p>Edit env variable DNS_SHEET_NAME and add the sheet name value to it, example: Sheet1</p>

                            <div class="code-block">
                                <span class="env-variable">DNS_SHEET_NAME</span>=<span class="env-value">"Sheet1"</span>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">3</span>
                                <span>Run the Node script</span>
                            </div>
                            <p>Finally, run the Node script as:</p>

                            <div class="code-block command">
                                node add_sheets_cf.js
                            </div>

                            <div class="notice">
                                <p><strong>Note:</strong> Make sure you have Node.js installed and all dependencies are
                                    properly configured before running the script.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tab 2: Postal Installation -->
            <section id="postal-installation" class="tab-content section-blue">
                <div class="section-header">
                    <h2>Postal Installation</h2>
                    <p>Complete setup and configuration of Postal mail server with Cloudflare DNS integration</p>
                </div>

                <div class="doc-card">
                    <div class="doc-header">
                        <h3><i class="fas fa-envelope"></i> Postal Mail Server Setup</h3>
                    </div>
                    <div class="doc-body">
                        <!-- Step 1 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">1</span>
                                <span>Prepare the sheet for the SSH credentials</span>
                            </div>
                            <p>Add the first row as:</p>

                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>POSTAL_DOMAIN</th>
                                            <th>HOST</th>
                                            <th>SSH_USER</th>
                                            <th>SSH_PASSWORD</th>
                                            <th>CF_ZONE_ID</th>
                                            <th>CF_TOKEN</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>postal.yourdomain.com</td>
                                            <td>192.168.1.100</td>
                                            <td>root</td>
                                            <td>your_password</td>
                                            <td>abc123...</td>
                                            <td>CF_Token_1</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <p>Next, add the correct values in the 2nd respective row.</p>
                        </div>

                        <!-- Step 2 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">2</span>
                                <span>Add the env variables</span>
                            </div>

                            <div class="code-block">
                                <span class="env-variable">TARGET_POSTAL_DOMAIN</span> = <span
                                    class="env-value">postal.yourdomain.com</span>
                            </div>

                            <div class="code-block">
                                <span class="env-variable">POSTAL_SHEET_NAME</span> = <span
                                    class="env-value">Sheet2</span>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">3</span>
                                <span>Run the script</span>
                            </div>

                            <div class="code-block command">
                                node postal_install.js
                            </div>
                        </div>

                        <!-- Step 4 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">4</span>
                                <span>Wait for the SSL connection</span>
                            </div>
                            <p>If the connection is successful, then it prompts you for:</p>
                            <ul>
                                <li>Admin email</li>
                                <li>First_name</li>
                                <li>Last_name</li>
                                <li>Initial_password</li>
                            </ul>
                            <p>These are for the postal make-user command to run automatically later.</p>
                        </div>

                        <!-- Steps 5-10 would continue here -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">5</span>
                                <span>Wait till all commands are executed</span>
                            </div>
                            <p>Your postal mail server will be live, if SSL generation doesn't create any errors, like
                                exceed the limit for certificate generations etc.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tab 3: aaPanel Automation -->
            <section id="aapanel-automation" class="tab-content section-green">
                <div class="section-header">
                    <h2>aaPanel Mail Server Automation</h2>
                    <p>Complete automation suite for aaPanel mail server setup with Cloudflare DNS integration</p>
                </div>

                <div class="doc-card">
                    <div class="doc-header">
                        <h3><i class="fas fa-robot"></i> Automation Overview</h3>
                    </div>
                    <div class="doc-body">
                        <p>This suite of scripts automates mail server setup on aaPanel with Cloudflare DNS integration
                            and mailbox management. The system reads configuration from Google Sheets and automates the
                            entire mail server provisioning process.</p>

                        <div class="info-box">
                            <h4><i class="fas fa-info-circle"></i> Scripts Overview</h4>
                            <ul>
                                <li><strong>domain_add_aapanel.js:</strong> Adds mail domains to aaPanel mail server
                                </li>
                                <li><strong>add_ssl_aapanel.js:</strong> Requests and installs SSL certificates using
                                    DNS validation</li>
                                <li><strong>aapanel_dmarc_cf.js:</strong> Syncs DMARC records from aaPanel to Cloudflare
                                </li>
                                <li><strong>aapanel_adduser.js:</strong> Creates mailboxes with interactive prompts</li>
                            </ul>
                        </div>

                        <!-- Step 1 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">1</span>
                                <span>Environment Configuration</span>
                            </div>
                            <p>Add the following environment variables to your configuration:</p>

                            <div class="code-block">
                                <span class="env-variable">AAPANEL_ADDURL</span>=<span
                                    class="env-value">https://IP:PORT/plugin?action=a&name=mail_sys&s=add_domain</span><br>
                                <span class="env-variable">AAPANEL_COOKIE</span>=<span
                                    class="env-value">your_cookie_here</span><br>
                                <span class="env-variable">AAPANEL_TOKEN</span>=<span
                                    class="env-value">your_token_here</span><br>
                                <span class="env-variable">MAIL_DOMAIN</span>=<span
                                    class="env-value">example.com</span><br>
                                <span class="env-variable">MAIL_A_RECORD</span>=<span class="env-value">mail</span><br>
                                <span class="env-variable">MAIL_SERVER_IP</span>=<span class="env-value">1.2.3.4</span>
                            </div>
                        </div>

                        <!-- Step 2 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">2</span>
                                <span>Run User Creation Script</span>
                            </div>

                            <div class="code-block command">
                                node aapanel_adduser.js
                            </div>

                            <p>The script will prompt for user details interactively:</p>

                            <div class="terminal">
                                <div class="terminal-line"><span class="terminal-prompt">$</span> node
                                    aapanel_adduser.js</div>
                                <div class="terminal-line"><span class="terminal-output">Enter the mail id u want to
                                        create, e.g </span><span
                                        class="terminal-highlight">sophia.davis@yourdomain.com</span></div>
                                <div class="terminal-line"><span class="terminal-output">Enter Your Password :
                                        eg-</span><span class="terminal-highlight">Demand@786</span></div>
                                <div class="terminal-line"><span class="terminal-output">Enter Your Full Name:
                                        eg-</span><span class="terminal-highlight">Sophia Davis</span></div>
                                <div class="terminal-line"><span class="terminal-output">Enter Quota in GB[5];
                                        eg-</span><span class="terminal-highlight">5</span></div>
                                <div class="terminal-line"><span class="terminal-output">Is Admin?(0=No,1=Yes):
                                        eg-</span><span class="terminal-highlight">0</span></div>
                                <div class="terminal-line"><br></div>
                                <div class="terminal-line"><span class="terminal-highlight">ðŸ“‹ USER SUMMARY:</span>
                                </div>
                                <div class="terminal-line">Email: <span
                                        class="terminal-highlight">sophia.davis@verisence.tech</span></div>
                                <div class="terminal-line">Domain: <span
                                        class="terminal-highlight">verisence.tech</span></div>
                                <div class="terminal-line">Full Name: <span class="terminal-highlight">sophia
                                        davis</span></div>
                                <div class="terminal-line">Quota: <span class="terminal-highlight">5 GB</span></div>
                                <div class="terminal-line">Admin: <span class="terminal-highlight">No</span></div>
                                <div class="terminal-line"><br></div>
                                <div class="terminal-line"><span class="terminal-output">Add this user? (y/n):
                                    </span><span class="terminal-highlight">y</span></div>
                                <div class="terminal-line"><span class="terminal-output">ðŸ“¤ Sending to aaPanel...</span>
                                </div>
                                <div class="terminal-line"><span class="terminal-output">ðŸ“¨ Response:</span></div>
                                <div class="terminal-line">{</div>
                                <div class="terminal-line"> "status": true,</div>
                                <div class="terminal-line"> "msg": "Add a mailbox user successfully
                                    sophia.davis@verisence.tech"</div>
                                <div class="terminal-line">}</div>
                                <div class="terminal-line"><span class="terminal-highlight">ðŸŽ‰ User added
                                        successfully!</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tab 4: Add ID Instantly -->
            <section id="instantly-integration" class="tab-content section-purple">
                <div class="section-header">
                    <h2>Add ID Instantly</h2>
                    <p>Integrate email accounts with Instantly platform for automated outreach</p>
                </div>

                <div class="doc-card">
                    <div class="doc-header">
                        <h3><i class="fas fa-bolt"></i> Instantly Integration Setup</h3>
                    </div>
                    <div class="doc-body">
                        <!-- Step 1 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">1</span>
                                <span>Prepare the sheet</span>
                            </div>
                            <p>Open Sheet6 and add the columns as:</p>

                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>INSTANTLY_API_KEY</th>
                                            <th>INSTANTLY_EMAIL</th>
                                            <th>INSTANTLY_PASSWORD</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>your_api_key_here</td>
                                            <td>example@domain.com</td>
                                            <td>YourPassword@123</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Step 2 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">2</span>
                                <span>Set environment variables</span>
                            </div>
                            <p>Add the following environment variables to your configuration:</p>

                            <div class="code-block">
                                <span class="env-variable">INSTANTLY_EMAIL</span>=<span
                                    class="env-value">example@domain.com</span><br>
                                <span class="env-variable">INSTANTLY_PASSWORD</span>=<span
                                    class="env-value">Demand@786</span><br>
                                <span class="env-variable">INSTANTLY_SHEET_NAME</span>=<span
                                    class="env-value">Sheet6</span>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="step">
                            <div class="step-title">
                                <span class="step-number">3</span>
                                <span>Run the Node Script</span>
                            </div>

                            <div class="code-block command">
                                node add_id_instantly.js
                            </div>

                            <div class="terminal">
                                <div class="terminal-line"><span class="terminal-prompt">$</span> node
                                    add_id_instantly.js</div>
                                <div class="terminal-line"><span class="terminal-output">Enter email to connect :
                                        eg-</span><span class="terminal-highlight">ava@gmail.com</span></div>
                                <div class="terminal-line"><span class="terminal-output">Enter IMAP Password :
                                        eg-</span><span class="terminal-highlight">Demand@786</span></div>
                                <div class="terminal-line"><span class="terminal-output">Enter SMTP Password :
                                        eg-</span><span class="terminal-highlight">Demand@786</span></div>
                                <div class="terminal-line"><span class="terminal-highlight">Connected
                                        Successfully</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Tab switching functionality
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab');
            const navLinks = document.querySelectorAll('.nav-links a');
            const tabContents = document.querySelectorAll('.tab-content');

            // Function to switch tabs
            function switchTab(tabId) {
                // Update tabs
                tabs.forEach(tab => {
                    if (tab.dataset.tab === tabId) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });

                // Update tab contents
                tabContents.forEach(content => {
                    if (content.id === tabId) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });

                // Update nav links
                navLinks.forEach(link => {
                    if (link.dataset.tab === tabId) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });

                // Update URL hash
                window.location.hash = tabId;
            }

            // Tab click event
            tabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    const tabId = this.dataset.tab;
                    switchTab(tabId);
                });
            });

            // Nav link click event
            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const tabId = this.dataset.tab;
                    switchTab(tabId);
                });
            });

            // Check URL hash on load
            if (window.location.hash) {
                const tabId = window.location.hash.substring(1);
                if (document.getElementById(tabId)) {
                    switchTab(tabId);
                }
            }

            // Mobile menu toggle (if needed in future)
            const mobileMenuToggle = document.createElement('button');
            mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            mobileMenuToggle.classList.add('mobile-menu-toggle');

            // Add responsive behavior
            function handleResize() {
                if (window.innerWidth <= 768) {
                    document.querySelector('.sidebar').style.display = 'block';
                } else {
                    document.querySelector('.sidebar').style.display = 'block';
                }
            }

            window.addEventListener('resize', handleResize);
            handleResize();
        });
    </script>
</body>

</html>